# 后置操作符

## 问号-可空类型

dart 2.12 及之后的版本中，引入了空安全（null safety），这意味着你必须明确地指出一个变量是否能被赋值为 `null`。这是空安全特性的一部分，它有助于防止运行时出现空引用错误，因为编码时你需要显式地处理可能为 `null` 的情况。例如，当你使用 `pageController` 变量时，你必须确保它不是 `null`，或者你必须与其它代码对它的可能为 `null` 的情况进行处理

```dart
// 重点，pageController可以被赋值为 `null`。如果没有 `?`，就无法被赋值为 `null`，如果企图这么做，编译时将会报错。
PageController? pageController; 

void myFunction() {
  // 在这里，我们必须检查 pageController 是否为 null
  if (pageController != null) {
    // pageController 已经被初始化，可以安全使用
    pageController!.jumpTo(0);
  } else {
    // 如果 pageController 是 null，则需要处理此情形
    // 比如：初始化 pageController 或给出提示等
  }
}
```

## 问号-非空断言操作符（Null Assertion Operator）

 在启用空安全的Dart代码中，如果你有一个可空类型的变量（例如 `int?`），它的值可能是 `null` 或者一个整数。如果你确定这个变量在某个上下文中一定不为 `null`，你可以使用感叹号 `!` 来断言这个变量此时非空，这样就可以作为非空类型使用。这称为非空断言操作符。

```dart
int? nullableNumber;
nullableNumber = 42;
int nonNullableNumber = nullableNumber!; // 非空断言，因为我们知道此时它不是null
```

如果你错误地使用了 `!` 而变量的值实际上是 `null`，运行时会抛出一个异常。


## 双问号-空合并运算（null coalescing）

其作用是当表达式的值为 `null` 时提供一个默认值。这在处理可能为 null 的值时可以非常有用，它可以帮助你优雅地设置后备值（fallback value）或默认值。

```dart
var value = possibleNullValue ?? defaultValue;
```

如果 `possibleNullValue` 不是 `null`，`value` 将被赋为 `possibleNullValue` 的值。如果 `possibleNullValue` 是 `null`，那么 `value` 将被赋为后面的 `defaultValue`。

```dart
String? userComment; // 这个变量可能是 null
String message = userComment ?? 'No comment provided'; // 如果 userComment 是 null，则使用默认字符串
```

在这个例子中，`userComment` 可能是一个未定义（`null`）的用户评论。然而，我们希望不管 `userComment` 是否有值，都能得到一个非空的字符串 `message`。如果 `userComment` 为 `null`，则 `message` 被设置为 `'No comment provided'`。

双问号操作符 `??` 是处理可能为空的变量时增强代码可读性和简洁性的一个好方法，尤其是在空安全的Dart代码中。它防止了写过多的条件语句来检查 `null` 值，并且提供了一种流畅的方式来指定默认值。 
